# CodeX 長期運用計画（作業ログ連携）

## 現在の重点テーマ
- CodeX が自律的に計画・実装・振り返りを行えるワークフロー基盤を強化する。  
  - `.codex/agents/` と `.codex/skills/` で役割・ハンドブックを整備済み。  
  - プロンプト群を `.codex/prompts/` に整理し、自己駆動サイクルを確立する（本タスク）。

## 今回の目的
- 7 つの専門プロンプト（Plan Reader, Task Executor, Repo Rebuilder, Commit & Review, Reflection Logger, Meta Generator, Orchestrator）を作成し、CodeX の自己運用サイクルを定義する。
- プロンプト間の連携手順と更新対象ファイルを明示し、plan/tasks/codex_agent_plan と同期を取る。

## 進捗メモ
- 2025-11-03: プロンプト作成タスクを開始。`tasks.md` に実行ステップを登録。
- 2025-11-03: `.codex/prompts/` を新設し、7 つの自己駆動プロンプトを作成。
- 2025-11-03: `scripts/create_workflow_session.py` で `.workflow-sessions/` のテンプレート複製とステータス更新を自動化。プロンプト依存関係図を `.codex/prompts/relationships.md` に整理。
- 2025-11-01: セッション生成スクリプトのスラッグ正規化を修正し、`.workflow-sessions/20251101_codex-autonomous-workflow/` で各フェーズログと `docs/task.md` の Codex 運用セクションを整備。
- 2025-10-31: Orchestrator セッション (20251031_codex-autonomous-workflow) を一巡させ、Plan Reader〜Meta Generator の成果を `.workflow-sessions/`・`plan.md`・`tasks.md`・`docs/codex_agent_plan.md` に反映。コミットを `main` へプッシュ済み。
- 2025-10-31: Orchestrator 再実行 (20251031_codex-autonomous-workflow-1) で Commit & Review / Reflection Logger / Orchestrator プロンプトを更新し、`session_status.json` テンプレートとサブチェックリストによる進捗管理を標準化。
- 2025-10-31: RAG 起動時に `chromadb` へ渡すメタデータが配列になりエラーとなる問題を調査し、タグ情報を文字列化＆取得時の整形を追加して解消。
- 2025-10-31: bot-runtime の `welcome.card.title_template` が空文字で起動失敗していたため、テンプレートを再設定し `loadConfig` 検証で復旧を確認。ダッシュボード側へ空文字禁止バリデーション追加をフォローアップとして追う。

## ウェルカムセクション改善要望
- 2025-11-01: 応急実装の積み重ねでコードが複雑化しているため、ウェルカムセクション全体を整理する。
- 2025-11-01: タイトル・サブタイトル・本文など文字入力系 UI の再設計を行い、フォントサイズを含むスタイルを見直す。
- 2025-11-01: オーバーレイ項目は不要なため機能ごと廃止する。
- 2025-11-01: プレビュー領域で「プレビュー」見出しと実表示の間が自動更新で変動し視認性を損ねているため、更新処理とレイアウトを再実装する。
- 2025-11-01: 新規参加者への自動投稿でウェルカム画像プレートが 3 回送信される不具合を修正し、1 回のみになるようにする。
- 2025-11-01: プレート下部の「ガイドを読む」「ロールを設定」ボタンをダッシュボードから調整できるようにする。

## 既存未完タスクレビュー
- 2025-11-01: `tasks.md` フォローアップの未完項目（Task Executor プロンプトの参照先整備）を次サイクルで対応する。
- 2025-11-01: `docs/plans.md` 記載のダッシュボード／API における空文字禁止バリデーション導入が未実装のため、UI とバックエンドの両面で再発防止策を実装する。
- 2025-11-01: `docs/task.md` に残る運用・セキュリティ系バックログ（README 更新とリリース手順、ESCL アカウント多重管理、暗号化ストアテスト、Secrets／権限運用ガイド整備など）の優先順位と実装計画を再整理する。
- 2025-11-01: `docs/task.md` のフロントエンド／UI 系バックログ（スク リム補助ワークフロー仕様、`/introduce` モーダル拡張、自己紹介フォームプレビュー強化、リアクションロールパネル検証など）の設計確定とダッシュボード実装スケジュールを立てる。
- 2025-11-01: `docs/task.md` のインフラ／運用強化タスク（低コスト常時稼働環境、稼働監視、設定同期自動化、障害時オペレーション手順、永続ストレージ、Webhook 連携など）を段階的に進めるためのロードマップを作成する。
